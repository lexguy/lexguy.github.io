<!DOCTYPE html>
<html lang="en">

<!-- Head tag -->
<head><meta name="generator" content="Hexo 3.9.0">
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="google-site-verification" content="xBT4GhYoi5qRD5tr338pgPM5OWHHIDR6mNg1a3euekI">
    <meta name="baidu-site-verification" content="code-FTjFydPGGl">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content>
    <meta name="keyword" content>
    <link rel="shortcut icon" href="/img/ironman-draw.png">
    <!-- Place this tag in your head or just before your close body tag. -->
    <script async defer src="https://buttons.github.io/buttons.js"></script>
    <title>
        
          ES6 Generator å‡½æ•°å’Œ yield å…³é”®å­— - Xuwei&#39;s blog
        
    </title>

    <link rel="canonical" href="http://yoursite-url/2020/07/15/ES6-Generator-å‡½æ•°/">

    <!-- Bootstrap Core CSS -->
    <link rel="stylesheet" href="/css/bootstrap.min.css">

    <!-- Custom CSS --> 
    <link rel="stylesheet" href="/css/beantech.min.css">
    
    <!-- Pygments Highlight CSS -->
    <link rel="stylesheet" href="/css/highlight.css">

    <link rel="stylesheet" href="/css/widget.css">

    <link rel="stylesheet" href="/css/rocket.css">

    <link rel="stylesheet" href="/css/signature.css">

    <link rel="stylesheet" href="/css/toc.css">

    <!-- Custom Fonts -->
    <!-- <link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.3.0/css/font-awesome.min.css" rel="stylesheet" type="text/css"> -->
    <!-- Hux change font-awesome CDN to qiniu -->
    <link href="https://cdn.staticfile.org/font-awesome/4.5.0/css/font-awesome.min.css" rel="stylesheet" type="text/css">


    <!-- Hux Delete, sad but pending in China
    <link href='http://fonts.googleapis.com/css?family=Lora:400,700,400italic,700italic' rel='stylesheet' type='text/css'>
    <link href='http://fonts.googleapis.com/css?family=Open+Sans:300italic,400italic,600italic,700italic,800italic,400,300,600,700,800' rel='stylesheet' type='text/
    css'>
    -->


    <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
        <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
        <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
    <![endif]-->

    <!-- ga & ba script hoook -->
    <script></script>
</head>


<!-- hack iOS CSS :active style -->
<body ontouchstart="">
	<!--
 * @Author: xuwei
 * @Date: 2020-05-07 00:57:50
 * @LastEditTime: 2020-05-10 21:41:15
 * @LastEditors: xuwei
 * @Description: 
 -->
<!-- Modified by Yu-Hsuan Yen -->
<!-- Post Header -->
<style type="text/css">
  header.intro-header{
      
          background-image: url('null')
          /*post*/
      
  }
  
</style>

<header class="intro-header">
  <!-- Signature -->
  <div id="signature">
    <div class="container">
      <div class="row">
        <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
          
          <div class="post-heading">
            <div class="tags">
              
              <a
                class="tag"
                href="/tags/#ES6 å¤§ä½œæˆ˜"
                title="ES6 å¤§ä½œæˆ˜"
                >ES6 å¤§ä½œæˆ˜</a
              >
              
            </div>
            <h1>ES6 Generator å‡½æ•°å’Œ yield å…³é”®å­—</h1>
            <h2 class="subheading"></h2>
            <span class="meta">
              Posted by xuwei on 2020-07-15
            </span>
          </div>
          
        </div>
      </div>
    </div>
  </div>
</header>

	
    <!-- Navigation -->
<nav class="navbar navbar-default navbar-custom navbar-fixed-top">
  <div class="container-fluid">
    <!-- Brand and toggle get grouped for better mobile display -->
    <div class="navbar-header page-scroll">
      <button type="button" class="navbar-toggle">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <!-- æ ‡é¢˜ä¸å†æ˜¯ç‚¹å‡»å›åˆ°ä¸»é¡µï¼Œè€Œæ˜¯ä¸€ä¸ªæ–‡æœ¬ -->
      <span class="navbar-brand" href="/"
        >Xuwei çš„ä¸ªäººç©ºé—´</span
      >
    </div>

    <!-- Collect the nav links, forms, and other content for toggling -->
    <!-- Known Issue, found by Hux:
            <nav>'s height woule be hold on by its content.
            so, when navbar scale out, the <nav> will cover tags.
            also mask any touch event of tags, unfortunately.
        -->
    <div id="huxblog_navbar">
      <div class="navbar-collapse">
        <ul class="nav navbar-nav navbar-right">
          <li>
            <!--            <a href="/">Home</a>-->
            <a href="/">ä¸»é¡µ</a>
          </li>

             
          <li>
            <a
              href="/archive/"
              >æ—¶é—´è½´
            </a>
          </li>
            
          <li>
            <a
              href="/about/"
              >å…³äº
            </a>
          </li>
            
          <li>
            <a
              href="/tags/"
              >æ ‡ç­¾
            </a>
          </li>
           
        </ul>
      </div>
    </div>
    <!-- /.navbar-collapse -->
  </div>
  <!-- /.container -->
</nav>
<script>
  // Drop Bootstarp low-performance Navbar
  // Use customize navbar with high-quality material design animation
  // in high-perf jank-free CSS3 implementation
  var $body = document.body;
  var $toggle = document.querySelector(".navbar-toggle");
  var $navbar = document.querySelector("#huxblog_navbar");
  var $collapse = document.querySelector(".navbar-collapse");

  $toggle.addEventListener("click", handleMagic);
  function handleMagic(e) {
    if ($navbar.className.indexOf("in") > 0) {
      // CLOSE
      $navbar.className = " ";
      // wait until animation end.
      setTimeout(function () {
        // prevent frequently toggle
        if ($navbar.className.indexOf("in") < 0) {
          $collapse.style.height = "0px";
        }
      }, 400);
    } else {
      // OPEN
      $collapse.style.height = "auto";
      $navbar.className += " in";
    }
  }
</script>


    <!-- Main Content -->
    <!-- Modify by Yu-Hsuan Yen -->

<!-- Post Content -->
<article>
    <div class="container">
        <div class="row">

            <!-- Post Container -->
            <div class="
                col-lg-8 col-lg-offset-2
                col-md-10 col-md-offset-1
                post-container">

                <p>Generator å‡½æ•°</p>
<h3><span id="åˆè¯†-generator-å‡½æ•°">åˆè¯† Generator å‡½æ•°</span></h3>
<p>Generator ä¹Ÿæ˜¯ ES6 æä¾›çš„ä¸€ä¸ª<strong>å¼‚æ­¥ç¼–ç¨‹è§£å†³æ–¹æ¡ˆ</strong>ï¼ˆè¯‘ä¸ºç”Ÿæˆå™¨ï¼Œå¯ä»¥ç†è§£ä¸ºç”Ÿæˆå¤šä¸ªå¯è¿­ä»£å€¼çš„å‡½æ•°ï¼‰ã€‚å‡½æ•°å†…éƒ¨å°è£…äº†å¤šä¸ªçŠ¶æ€ï¼Œè°ƒç”¨æ—¶å¯ä»¥å¾—åˆ°ä¸€ä¸ªè¿­ä»£å™¨å¯¹è±¡ï¼Œé€šè¿‡è¿­ä»£å™¨å¯¹è±¡ï¼Œå°±èƒ½éå†å‡º Generator å‡½æ•°çš„æ¯ä¸€ä¸ªå€¼ã€‚</p>
<blockquote>
<p>å…³äº Iterator è¿­ä»£å™¨å’Œè¿­ä»£åè®®å¯ä»¥å‚è§è¿™ç¯‡ï¼š<a href>ES6Â  ç³»åˆ— Â Iterator</a></p>
</blockquote>
<p>çœ‹ä¸€ä¸ªç®€å•çš„ä¾‹å­ ğŸŒ°ï¼š</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span>* <span class="title">firGenerator</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">yield</span> <span class="number">1</span>;</span><br><span class="line">  <span class="keyword">yield</span> <span class="number">2</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">const</span> fir = firGenerator();</span><br><span class="line"><span class="built_in">console</span>.info(fir.next()); <span class="comment">//&#123; value: 1, done: false &#125;</span></span><br><span class="line"><span class="built_in">console</span>.info(fir.next()); <span class="comment">//&#123; value: 2, done: false &#125;</span></span><br></pre></td></tr></table></figure>
<p>å‡½æ•°ä½“å†…éƒ¨ä½¿ç”¨<code>yield</code>è¯­å¥ï¼ˆåé¢ä»‹ç»<code>yield</code>è¯­å¥ï¼‰ç”Ÿæˆå€¼ï¼Œè¿”å›çš„è¿­ä»£å™¨å¯¹è±¡æ˜¯ç¬¦åˆå¯è¿­ä»£åè®®å’Œè¿­ä»£å™¨åè®®çš„ï¼Œæ‰€ä»¥å¯ä»¥æŒç»­è°ƒç”¨<code>next</code>æ–¹æ³•å¾—åˆ°è¿­ä»£å€¼ï¼Œ return å‡½æ•°å¹¶ä¸éœ€è¦æˆ‘ä»¬æ˜¾å¼æŒ‡å®šã€‚</p>
<p>Generator å‡½æ•°è°ƒç”¨åå¹¶ä¸ç«‹é©¬æ‰§è¡Œï¼Œè€Œæ˜¯è¿”å›ä¸€ä¸ªæŒ‡é’ˆå¯¹è±¡(è¿­ä»£å™¨å¯¹è±¡)ï¼ŒæŒ‡å‘çš„æ˜¯å†…éƒ¨çŠ¶æ€ã€‚åªæœ‰è°ƒç”¨è¿­ä»£å™¨å¯¹è±¡çš„<code>next</code>æ–¹æ³•ï¼ŒæŒ‡é’ˆæ‰ä¼šç§»åˆ°ä¸‹ä¸€ä¸ªçŠ¶æ€ã€‚ç¬¬ä¸€æ¬¡è°ƒç”¨<code>next</code>æ–¹æ³•ï¼Œä¼šä»å‡½æ•°å¤´éƒ¨å¼€å§‹æ‰§è¡Œï¼Œç›´åˆ°é‡åˆ°ä¸€ä¸ª<code>yield</code>è¡¨è¾¾å¼ã€<code>return</code>è¯­å¥æˆ–è€…<code>throw</code>è¯­å¥ï¼Œè€Œå†æ¬¡è°ƒç”¨çš„æ—¶å€™ä¼šä»ä¸Šæ¬¡<code>yield</code>è¯­å¥çš„åœ°æ–¹å¼€å§‹æ‰§è¡Œã€‚</p>
<ul>
<li>yield ã€‚æš‚åœ Generator å‡½æ•°å¹¶è¿”å›å¾—åˆ°ç”Ÿæˆå™¨æ–°å€¼ï¼Œä¸‹ä¸€æ¬¡<code>next</code>è°ƒç”¨ä¼šä»ä¸Šä¸€æ¬¡çš„<code>yield</code>è¡¨è¾¾å¼ä½ç½®å¼€å§‹æ‰§è¡Œã€‚</li>
<li>throw ã€‚å¯ä»¥ä»ç”Ÿæˆå™¨ä¸­æŠ›å‡ºå¼‚å¸¸ï¼Œç”Ÿæˆå™¨ä¼šå®Œå…¨åœæ­¢ï¼Œéœ€è¦åœ¨è°ƒç”¨å¤„æ•è·ã€‚</li>
<li>return è¯­å¥ã€‚ç”Ÿæˆå™¨çš„æ‰§è¡Œç»“æŸï¼Œå°†è¿­ä»£ç»“æœè¿”å›ç»™è°ƒç”¨è€…ï¼Œè¿”å›çš„<code>done</code>ä¸º<code>true</code>ï¼Œè§†ä¸ºè¿­ä»£å®Œæˆã€‚</li>
<li>åˆ°è¾¾ Generator å‡½æ•°æœ«å°¾ï¼Œç”Ÿæˆå™¨æ­£å¸¸æ‰§è¡ŒæŠ€ç»“æŸï¼Œå¾—åˆ°<code>value</code>ä¸º<code>undefined</code>ï¼Œä¸”<code>done</code>ä¸º<code>true</code>ã€‚</li>
</ul>
<p>é™¤äº†å¯ä»¥æš‚åœå’Œæ¢å¤æ‰§è¡Œï¼Œè¿˜éœ€è¦æ³¨æ„ Generator å‡½æ•°ä¸€äº›å½¢å¼ä¸Šç‰¹å¾ï¼š</p>
<ul>
<li>å‡½æ•°åä¸Šéœ€è¦å¸¦æ˜Ÿå· * (æ˜Ÿå·å¯ä»¥å†™åœ¨<code>function</code>å…³é”®å­—å’Œå‡½æ•°åä¹‹é—´çš„ä»»æ„ä½ç½®ï¼Œæ¨èæ˜¯ç´§è·Ÿ<code>function</code>å…³é”®å­—)</li>
<li>å‡½æ•°ä½“å†…éƒ¨ä½¿ç”¨<code>yield</code>è¡¨è¾¾å¼ç”Ÿæˆå€¼</li>
</ul>
<p>å¦å¤–ï¼Œå› ä¸º Generator å‡½æ•°æ‰§è¡Œè¿”å›çš„æ˜¯ä¸€ä¸ªè¿­ä»£å™¨å¯¹è±¡ï¼Œé‚£ä¹Ÿå°±æ˜¯å¯ä»¥ä½œä¸ºå¯¹è±¡çš„<code>[Symbol.iterator]</code>å±æ€§ï¼Œä½¿å¯¹è±¡å¯è¿­ä»£ã€‚</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> obj = &#123;&#125;;</span><br><span class="line">obj[<span class="built_in">Symbol</span>.iterator] = <span class="function"><span class="keyword">function</span>* (<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">yield</span> <span class="number">1</span>, <span class="keyword">yield</span> <span class="number">2</span>;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="built_in">console</span>.info([...obj]); <span class="comment">// [ 1, 2 ]</span></span><br></pre></td></tr></table></figure>
<p>å¦‚ä¸Šå¯¹<code>obj</code>ä½¿ç”¨æ‰©å±•è¿ç®—ç¬¦è¿­ä»£å¾—åˆ°çš„æ˜¯<code>[ 1, 2 ]</code>ï¼Œå·²ç»æŒ‰ç…§æˆ‘ä»¬é¢„è®¾çš„æ–¹å¼è¿›è¡Œäº†è¿­ä»£ã€‚</p>
<h3><span id="yield-è¡¨è¾¾å¼">yield è¡¨è¾¾å¼</span></h3>
<p><strong>å¯ä»¥è®¤ä¸ºï¼ŒGenerator å‡½æ•°æ˜¯å¯æš‚åœæ‰§è¡Œçš„å‡½æ•°ï¼Œ<code>yield</code>è¯­å¥å¯ä»¥ç”¨æ¥æš‚åœæ‰§è¡Œç”Ÿæˆå€¼ï¼Œ<code>next</code>æ–¹æ³•å¯ä»¥æ¢å¤æ‰§è¡Œã€‚ä¸”<code>yield</code>è¡¨è¾¾å¼åªèƒ½ç”¨äº Generator å‡½æ•°ä¸­ã€‚</strong><code>yield</code>è¡¨è¾¾å¼è¿è¡Œé€»è¾‘æ˜¯è¿™æ ·çš„ï¼š</p>
<ol>
<li>
<p>æ‰§è¡Œåˆ°<code>yield</code>ï¼ŒGenerator å‡½æ•°ä¼šæš‚åœï¼Œå¹¶å°†åé¢çš„å€¼ä½œä¸ºè¿­ä»£æ—¶çš„ value å€¼ã€‚</p>
</li>
<li>
<p>åªæœ‰è°ƒç”¨<code>next</code>æ–¹æ³•ï¼ŒGenerator å‡½æ•°æ‰ä¼šç»§ç»­æ‰§è¡Œï¼Œå¦‚æœå†é‡åˆ°<code>yield</code>ï¼Œåˆ™åŒæ ·æš‚åœå¹¶èµ‹äºˆæ–°çš„è¿­ä»£æ—¶çš„ value å€¼ã€‚å¦‚æœæ²¡æœ‰<code>yield</code>è¡¨è¾¾å¼ï¼Œåˆ™ç»§ç»­æ‰§è¡Œï¼Œåé¢ä¹Ÿæ²¡æœ‰<code>return</code>è¯­å¥çš„è¯ï¼Œå°±ä¼šæ‰§è¡Œå®Œæˆï¼Œæ­¤æ—¶çš„ value ä¸º undefinedã€‚æœ‰<code>return</code>è¯­å¥çš„è¯ï¼Œ<code>return</code>åé¢çš„å€¼ä¼šä½œä¸º<code>value</code>å€¼ï¼Œä¸”å‡½æ•°ç»“æŸã€‚</p>
</li>
</ol>
<p>å¦‚æœ<code>yiled</code>åé¢è·Ÿçš„ä¹Ÿæ˜¯ä¸€ä¸ªè¡¨è¾¾å¼ï¼Œè¯¥è¡¨è¾¾å¼åªæœ‰å½“é€šè¿‡è°ƒç”¨<code>next</code>æ–¹æ³•è¿è¡Œåˆ°<code>yield</code>è¯­å¥æ—¶ï¼Œæ‰ä¼šæ‰§è¡Œã€‚</p>
<p><code>yield</code>è¡¨è¾¾å¼å¯ä»¥ç”¨åœ¨å¦ä¸€ä¸ªè¡¨è¾¾å¼ä¸­ï¼Œä½†å¿…é¡»æ”¾åœ¨åœ†æ‹¬å·ä¸­ã€‚<code>yield</code>è¡¨è¾¾å¼è¿˜å¯ä»¥ç”¨ä½œå‡½æ•°å‚æ•°ï¼Œä½†åªæ˜¯åœ¨<code>yield</code>è¡¨è¾¾å¼æ‰§è¡Œå®Œä¹‹åç»§ç»­è°ƒç”¨<code>next</code>è¯¥å‡½æ•°æ‰ä¼šæ‰§è¡Œã€‚</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span>* <span class="title">gen</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">"Hi"</span> + (<span class="keyword">yield</span> <span class="number">1</span>));</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">const</span> g = gen();</span><br><span class="line"><span class="built_in">console</span>.info(g.next()); <span class="comment">// &#123; value: 1, done: false &#125;</span></span><br><span class="line"><span class="built_in">console</span>.info(g.next());</span><br><span class="line"><span class="comment">//Hiundefined</span></span><br><span class="line"><span class="comment">//&#123; value: undefined, done: true &#125;</span></span><br></pre></td></tr></table></figure>
<p>ç¬¬ä¸€æ¬¡è°ƒç”¨<code>next</code>çš„æ—¶å€™ï¼Œåªä¼šå¾—åˆ°<code>1</code>ï¼Œç¬¬äºŒæ¬¡è°ƒç”¨<code>next</code>çš„æ—¶å€™ï¼Œæ‰ä¼šè¾“å‡º<code>Hi</code>ï¼Œæ­¤æ—¶å‡½æ•°æ‰§è¡Œå®Œï¼Œvalue æ˜¯<code>undefined</code>ã€‚</p>
<h4><span id="yield-è¡¨è¾¾å¼çš„è¿”å›å€¼">yield è¡¨è¾¾å¼çš„è¿”å›å€¼</span></h4>
<p><code>yield</code>è¡¨è¾¾å¼æœ¬èº«æ˜¯æ²¡æœ‰è¿”å›å€¼çš„(<code>undefined</code>)ï¼Œè€Œ<code>next</code>æ–¹æ³•åœ¨è°ƒç”¨æ—¶å¦‚æœå¸¦ä¸€ä¸ªå‚æ•°æ—¶ï¼Œè¯¥å‚æ•°å°±ä¼šè¢«å½“ä½œä¸Šä¸€ä¸ª<code>yield</code>è¡¨è¾¾å¼çš„è¿”å›å€¼ã€‚</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span>* <span class="title">gen</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">const</span> a = <span class="keyword">yield</span> <span class="number">2</span>;</span><br><span class="line">  <span class="keyword">yield</span> a * <span class="number">3</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">const</span> g = gen();</span><br><span class="line"><span class="built_in">console</span>.info(g.next()); <span class="comment">// &#123; value: 2, done: false &#125;</span></span><br><span class="line"><span class="built_in">console</span>.info(g.next()); <span class="comment">// &#123; value: NaN, done: false &#125;</span></span><br></pre></td></tr></table></figure>
<p>å› ä¸º<code>yield</code>è¿”å›å€¼æ˜¯<code>undefined</code>ï¼Œæ‰€ä»¥ä¹˜ä»¥ 3 ä¹‹åå¾—åˆ°<code>NaN</code>ã€‚è€Œå¦‚æœæŠŠä¸Šé¢çš„åé¢ä¸¤æ¡è¾“å‡ºè¯­å¥æ¢æˆå¦‚ä¸‹ï¼š</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">console</span>.info(g.next()); <span class="comment">//&#123; value: 2, done: false &#125;</span></span><br><span class="line"><span class="built_in">console</span>.info(g.next(<span class="number">5</span>)); <span class="comment">//&#123; value: 15, done: false &#125;</span></span><br></pre></td></tr></table></figure>
<p>åé¢çš„<code>next</code>æ–¹æ³•ä¼ äº†å€¼ï¼Œä½¿çš„å‰ä¸€ä¸ª<code>yield</code>è¯­å¥çš„è¿”å›å€¼<code>a</code>ä¸º 5ï¼Œå†ä¹˜ 3ï¼Œæ•…ç¬¬äºŒä¸ª<code>next</code>è¿­ä»£å‡ºçš„å€¼æ˜¯ 15ã€‚</p>
<h4><span id="yield-è¡¨è¾¾å¼">yield* è¡¨è¾¾å¼</span></h4>
<p>å¦‚æœåœ¨ Generator å‡½æ•°ä¸­éœ€è¦è°ƒç”¨å¦ä¸€ä¸ª Generator å‡½æ•°æˆ–è€…å…¶ä»–å¯è¿­ä»£å¯¹è±¡ï¼Œå°±éœ€è¦ç”¨åˆ°<code>yield*</code>è¡¨è¾¾å¼ï¼Œ<code>yield*</code>è¡¨è¾¾å¼å¯ä»¥äº§ç”Ÿè¿­ä»£å¯¹è±¡è¿”å›çš„çš„æ¯ä¸ªå€¼ï¼Œ<code>yield*</code>æœ¬èº«çš„è¿”å›å€¼æ˜¯å½“è¿­ä»£å™¨ç»“æŸæ—¶è¿”å›çš„å€¼ã€‚</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span>* <span class="title">gen1</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">yield</span> <span class="string">"a"</span>;</span><br><span class="line">  <span class="keyword">yield</span> <span class="string">"b"</span>;</span><br><span class="line">  <span class="keyword">return</span> <span class="string">"C"</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span>* <span class="title">gen2</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">yield</span> <span class="number">1</span>;</span><br><span class="line">  <span class="keyword">const</span> result = <span class="keyword">yield</span>* gen1();</span><br><span class="line">  <span class="built_in">console</span>.info(<span class="string">"[result]"</span>, result);</span><br><span class="line">  <span class="keyword">yield</span>* <span class="string">"xy"</span>;</span><br><span class="line">  <span class="keyword">yield</span> <span class="number">2</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">let</span> v <span class="keyword">of</span> gen2()) &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(v);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// ä¾æ¬¡è¾“å‡ºï¼š</span></span><br><span class="line"><span class="comment">// 1</span></span><br><span class="line"><span class="comment">// a</span></span><br><span class="line"><span class="comment">// b</span></span><br><span class="line"><span class="comment">// [result] C</span></span><br><span class="line"><span class="comment">// x</span></span><br><span class="line"><span class="comment">// y</span></span><br><span class="line"><span class="comment">// 2</span></span><br></pre></td></tr></table></figure>
<p>å¦‚ä¸Šï¼Œ<code>gen2</code>ä¸­åŒ…å«äº†å¯¹<code>gen1()</code>å’Œå­—ç¬¦ä¸²<code>xy</code>ï¼Œå¹¶å¯¹è¿™ä¸¤ä¸ªæ•°æ®ä½¿ç”¨äº†<code>yield*</code>å‘½ä»¤ï¼Œå®é™…ä¸Šç›¸å½“äºå°†ä»–ä»¬ä¾æ¬¡è¿­ä»£ï¼Œå¹¶å°†è¿­ä»£ç»“æœå†ä½¿ç”¨<code>yield</code>ï¼Œæ•…å¯¹<code>gen2()</code>å¯¹è±¡éå†ï¼Œä¹Ÿå¾—åˆ°äº†<code>gen1()</code>å’Œå­—ç¬¦ä¸²çš„è¿­ä»£ç»“æœã€‚å¦å¤–ï¼Œæœ€åä¸€æ¬¡è¿­ä»£çš„ç»“æœï¼Œä¼šè¢«ä½œä¸º<code>yield*</code>çš„è¿”å›å€¼ï¼Œå¦‚ä¸Šçš„<code>[result] C</code>ï¼Œå¦‚æœå°†<code>gen1</code>ä¸­çš„<code>return &quot;C&quot;</code>æ›¿æ¢æˆ<code>yield &quot;C&quot;</code>ï¼Œé‚£ä¹ˆ<code>resuilt</code>å°±æ˜¯ <code>undefined</code>ã€‚</p>
<h3><span id="generatorprototype-çš„-nextthrowreturn-æ–¹æ³•">Generator.prototype çš„ next,throw,return æ–¹æ³•</span></h3>
<p>Generator å‡½æ•°è¿”å›çš„è¿­ä»£å™¨å¯¹è±¡ï¼Œéƒ½æœ‰ä¸‰ä¸ªé‡è¦çš„æ–¹æ³•ï¼Œ<code>next</code>,<code>throw</code>ï¼Œ<code>return</code>æ–¹æ³•ã€‚<code>next</code>æ–¹æ³•å·²ç»ä»‹ç»è¿‡ï¼Œå¯ä»¥æ¢å¤å‡½æ•°æ‰§è¡Œï¼Œå¹¶å¯ä»¥å‘<code>next</code>æ–¹æ³•ä¼ å€¼ä½œä¸ºä¸Šä¸€ä¸ª<code>yield</code>è¯­å¥çš„è¿”å›å€¼ã€‚å…³äº<code>throw</code>å’Œ<code>return</code>:</p>
<ul>
<li>throw å¯ä»¥ç”¨äºåœ¨å‡½æ•°ä½“å¤–æŠ›å‡ºé”™è¯¯ï¼Œå¹¶ä¸”åœ¨ Generator å‡½æ•°ä½“å†…æ•è·ã€‚<strong>è¿™é‡Œçš„ throw æ˜¯é€šè¿‡è°ƒç”¨ Generator å‡½æ•°å¾—åˆ°çš„è¿­ä»£å™¨è°ƒç”¨çš„ï¼Œéœ€è¦åŒºåˆ«äºå…¨å±€çš„ throw å‘½ä»¤ã€‚</strong></li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> gen = <span class="function"><span class="keyword">function</span>* (<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">try</span> &#123;</span><br><span class="line">    <span class="keyword">yield</span>;</span><br><span class="line">  &#125; <span class="keyword">catch</span> (e) &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">"å†…éƒ¨æ•è·"</span>, e);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> g = gen();</span><br><span class="line">g.next();</span><br><span class="line"></span><br><span class="line"><span class="keyword">try</span> &#123;</span><br><span class="line">  i.throw(<span class="string">"a"</span>);</span><br><span class="line">  i.throw(<span class="string">"b"</span>);</span><br><span class="line">  i.throw(<span class="string">"c"</span>);</span><br><span class="line">&#125; <span class="keyword">catch</span> (e) &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">"å¤–éƒ¨æ•è·"</span>, e);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//-----è¾“å‡º-----</span></span><br><span class="line"><span class="comment">//å†…éƒ¨æ•è· a</span></span><br><span class="line"><span class="comment">//å¤–éƒ¨æ•è· b</span></span><br></pre></td></tr></table></figure>
<p><code>next</code>ä½¿ Generator å‡½æ•°æ‰§è¡Œåˆ°<code>yield</code>ï¼Œa é”™è¯¯è¢« Generator å‡½æ•°å†…éƒ¨æ•è·ï¼ŒGenerator å‡½æ•°æ‰§è¡Œå®Œã€‚ä¸‹ä¸€ä¸ª b é”™è¯¯å°±åªèƒ½è¢«å¤–éƒ¨çš„<code>try-catch</code>è¯­å¥æ•è·ï¼Œå¾—åˆ° bã€‚è€Œå¤–éƒ¨å‡½æ•°çš„<code>try-catch</code>ä¸­ï¼ŒæŠ›å‡º b é”™è¯¯ä¸”è¢«è‡ªèº«çš„<code>catch</code>æ•è·åˆ°ï¼Œåé¢çš„<code>throw(&quot;c&quot;)</code>ä¸ä¼šè¢«æ‰§è¡Œã€‚</p>
<p>å¦‚æœ Generator å‡½æ•°å†…éƒ¨æ²¡æœ‰æŒ‡å®š<code>try-catch</code>è¯­å¥ï¼Œåˆ™æŠ›å‡ºçš„é”™è¯¯åªèƒ½è¢«å¤–éƒ¨çš„<code>try-catch</code>æ•è·ï¼Œå¦‚æœå¤–éƒ¨æ²¡æœ‰<code>try-catch</code>ï¼Œé‚£ä¹ˆå‡½æ•°ä¼šç›´æ¥æŠ¥é”™ï¼Œä¸­æ–­æ‰§è¡Œã€‚å¦å¤–ï¼Œå¦‚æœè¿­ä»£å™¨å¯¹è±¡æ²¡æœ‰è°ƒç”¨è¿‡<code>next</code>æ–¹æ³•ï¼Œæ˜¯ä¸èƒ½æ‰§è¡Œ<code>throw</code>æ–¹æ³•çš„ï¼Œå› ä¸º<code>next</code>æ–¹æ³•æ‰§è¡Œæ—¶ï¼Œæ‰çœŸæ­£æ‰§è¡Œ Generator å‡½æ•°ï¼Œæ­¤æ—¶çš„ <code>throw</code>æ–¹æ³•ä¼šå°†é”™è¯¯ç›´æ¥æŠ›å‡ºåˆ°å‡½æ•°å¤–éƒ¨ã€‚</p>
<p>å¦å¤–ï¼Œå¦‚æœ Generator ä¸­<code>try-catch</code>è¯­å¥åé¢è¿˜æœ‰<code>yield</code>ï¼Œé‚£ä¹ˆ<code>throw</code>é”™è¯¯è¢« Generator å‡½æ•°å†…æ•è·ä¹‹åï¼Œè¿˜ä¼šé™„å¸¦æ‰§è¡Œä¸€æ¬¡<code>next</code>ï¼Œè§¦å‘<code>try-catch</code>åé¢çš„<code>yield</code>è¯­å¥ã€‚å¦‚æœ Generator æ‰§è¡Œæ—¶æŠ›å‡ºçš„é”™è¯¯æ²¡æœ‰è¢«å†…éƒ¨æ•è·ï¼Œé‚£ä¹ˆ Generator å‡½æ•°å°±ä¸ä¼šå†æ‰§è¡Œä¸‹å»ã€‚å†æ‰§è¡Œ<code>next</code>å¾—åˆ°çš„æ˜¯<code>{value:undefined,done:true}</code>ã€‚</p>
<ul>
<li>return å¯ä»¥è¿”å›ç»™å®šçš„å‚æ•°å€¼ï¼Œå°†æŒ‡å®šçš„å‚æ•°ä½œä¸º<code>value</code>ï¼Œå¦‚æœä¸æŒ‡å®šå‚æ•°åˆ™<code>value</code>æ˜¯<code>undefined</code>ã€‚ä½†æ˜¯<code>return</code>ä¸€æ—¦æ‰§è¡Œï¼ŒGenerator å‡½æ•°çš„è¿­ä»£å°±ç®—ä½œç»ˆæ­¢äº†ï¼Œ<code>done</code>ä¸º<code>true</code>ã€‚</li>
</ul>
<p>å¦‚æœ Generator å‡½æ•°å†…è¿˜æœ‰<code>try-finally</code>è¯­å¥å—ï¼Œä¸”åœ¨æ‰§è¡Œ<code>try</code>è¯­å¥æ—¶è°ƒç”¨äº†<code>return</code>,é‚£ä¹ˆ Generator å‡½æ•°ä¼šç›´æ¥è¿›å…¥<code>finally</code>è¯­å¥ï¼Œ<code>finally</code>è¯­å¥æ‰§è¡Œå®Œä¹‹åï¼Œæ‰ä¼šé€šè¿‡<code>return</code>è¯­å¥ä½¿ Generator ç»“æŸã€‚</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span>* <span class="title">gen</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">try</span> &#123;</span><br><span class="line">    <span class="keyword">yield</span> <span class="string">"A"</span>;</span><br><span class="line">    <span class="keyword">yield</span> <span class="string">"B"</span>;</span><br><span class="line">  &#125; <span class="keyword">finally</span> &#123;</span><br><span class="line">    <span class="keyword">yield</span> <span class="string">"C"</span>;</span><br><span class="line">    <span class="keyword">yield</span> <span class="string">"D"</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">const</span> g = gen();</span><br><span class="line"><span class="built_in">console</span>.info(g.next()); <span class="comment">// &#123; value: 'A', done: false &#125;</span></span><br><span class="line"><span class="built_in">console</span>.info(g.return(<span class="string">"X"</span>)); <span class="comment">// &#123; value: 'C', done: false &#125;</span></span><br><span class="line"><span class="built_in">console</span>.info(g.next()); <span class="comment">// &#123; value: 'D', done: false &#125;</span></span><br><span class="line"><span class="built_in">console</span>.info(g.next()); <span class="comment">// &#123; value: 'X', done: true &#125;</span></span><br><span class="line"><span class="built_in">console</span>.info(g.next()); <span class="comment">// &#123; value: undefined, done: true &#125;</span></span><br></pre></td></tr></table></figure>
<p>X å…ˆäº C å’Œ D è¢«è¿­ä»£ï¼Œå› ä¸º<code>return</code>å¯¼è‡´<code>finally</code>æ‰§è¡Œã€‚</p>
<p><code>next</code>,<code>throw</code>,<code>return</code>ä¸‰ä¸ªæ–¹æ³•éƒ½å¯ä»¥è®© Generator å‡½æ•°æ¢å¤æ‰§è¡Œã€‚<code>next</code>æ–¹æ³•å¯ä»¥ä¼ å€¼å¹¶ä½œä¸º<code>yield</code>è¡¨è¾¾å¼çš„å€¼ï¼Œ<code>throw</code>æŠ›å‡ºé”™è¯¯ï¼Œéœ€è¦è¢«<code>try-catch</code>åœ¨å‡½æ•°å†…éƒ¨æˆ–å¤–éƒ¨æ•è·ã€‚<code>return</code>åˆ™ç»ˆæ­¢ Generator å‡½æ•°æ‰§è¡Œï¼Œå¯è®¾å®šè¿­ä»£<code>value</code>å€¼ã€‚</p>
<h3><span id="generator-å‡½æ•°å®ç°å¼‚æ­¥">Generator å‡½æ•°å®ç°å¼‚æ­¥</span></h3>
<p>åˆ°è¿™é‡Œï¼ŒGenerator å‡½æ•°çš„ä½¿ç”¨åªæ˜¯å’Œ<code>Iterator</code>è¿­ä»£ç›¸å…³è”ï¼Œè¿˜æ²¡æœ‰çœŸæ­£è¿›å…¥ä»–çš„æ ¸å¿ƒä½¿ç”¨æ–¹æ³•**â€“å¼‚æ­¥ç¼–ç¨‹**ã€‚åœ¨è¿›å…¥ Generator å‡½æ•°çš„å¼‚æ­¥ç¼–ç¨‹åº”ç”¨ä¹‹å‰ï¼Œéœ€è¦ç®€å•äº†è§£ä¸€ä¸‹<code>Thunk</code>å‡½æ•°ã€‚</p>
<h4><span id="thunk-å‡½æ•°">Thunk å‡½æ•°</span></h4>
<blockquote>
<p>è§£é‡Šï¼šåœ¨å¯¹å‡½æ•°è°ƒç”¨ä¼ å‚æ—¶ï¼Œå¦‚æœå‚æ•°æ˜¯ä¸€ä¸ªè®¡ç®—ç»“æœï¼Œåˆ™å°†è¯¥è®¡ç®—è¿‡ç¨‹å°è£…åˆ°ä¸€ä¸ªä¸´æ—¶å‡½æ•°é‡Œé¢ï¼Œå†å°†ä¸´æ—¶å‡½æ•°ä¼ å…¥åˆ°è¦è°ƒç”¨çš„å‡½æ•°ä¸­ã€‚è¿™ä¸ªä¸´æ—¶å‡½æ•°å°±æ˜¯<code>Thunk</code>å‡½æ•°ã€‚</p>
</blockquote>
<p>åœ¨ JavaScript ä¸­<code>Thunk</code>å‡½æ•°çš„å«ä¹‰ç•¥æœ‰ä¸åŒï¼ŒJavaScript çš„<code>Thunk</code>å‡½æ•°åˆ™æ˜¯<strong>å°†å¤šå‚æ•°å‡½æ•°æ›¿æ¢æˆä¸€ä¸ªåªæ¥å—å›è°ƒå‡½æ•°</strong>çš„å‚æ•°ã€‚</p>
<p>å¦‚ä¸‹å‡½æ•°ï¼Œç”¨<code>setTimeOut</code>æ¨¡æ‹Ÿäº†ä¸€ä¸ªå¼‚æ­¥è¿‡ç¨‹ï¼Œ<code>asyncTask</code>æ¥æ”¶ä¸¤ä¸ªå‚æ•°ï¼Œåˆå§‹å€¼å’Œç”¨äºå¤„ç†å€¼çš„å›è°ƒå‡½æ•°ã€‚</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">asyncTask</span>(<span class="params">number, callBack</span>) </span>&#123;</span><br><span class="line">  setTimeout(<span class="function"><span class="params">()</span> =&gt;</span> callBack(number + <span class="number">1</span>), <span class="number">2000</span>);</span><br><span class="line">&#125;</span><br><span class="line">getCount = <span class="function">(<span class="params">number</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="built_in">console</span>.info(<span class="string">"[count]"</span>, number * <span class="number">10</span>);</span><br><span class="line">&#125;;</span><br><span class="line">asyncTask(<span class="number">3</span>, getCount);</span><br><span class="line"></span><br><span class="line"><span class="comment">// ä¸¤ç§’åè¾“å‡ºï¼š</span></span><br><span class="line"><span class="comment">// [count] 40</span></span><br></pre></td></tr></table></figure>
<p>å°†ä¸Šé¢çš„æµç¨‹æ”¹ä¸º<code>Thunk</code>å‡½æ•°æ‰§è¡Œï¼Œå¹¶ç”¨ä¸¤ä¸ªå›è°ƒå‡½æ•°æ¥å¤„ç†ï¼š</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">asyncThunk</span>(<span class="params">number</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="function"><span class="keyword">function</span> (<span class="params">callBack</span>) </span>&#123;</span><br><span class="line">    setTimeout(<span class="function"><span class="params">()</span> =&gt;</span> callBack(number + <span class="number">1</span>), <span class="number">2000</span>);</span><br><span class="line">  &#125;;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">const</span> thunk = asyncThunk(<span class="number">3</span>); <span class="comment">// thunk å°±æ˜¯ä¸€ä¸ª Thunk å‡½æ•°ï¼Œåªæ¥å—ä¸€ä¸ªå‡½æ•°å‚æ•°</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//å®šä¹‰ä¸¤ä¸ªå›è°ƒå‡½æ•°</span></span><br><span class="line">getCount = <span class="function">(<span class="params">number</span>) =&gt;</span> <span class="built_in">console</span>.info(<span class="string">"[count]"</span>, number * <span class="number">10</span>);</span><br><span class="line">getMoreCount = <span class="function">(<span class="params">number</span>) =&gt;</span> <span class="built_in">console</span>.info(<span class="string">"[more,conut]"</span>, number * <span class="number">100</span>);</span><br><span class="line"><span class="comment">//æ‰§è¡Œ Thunk å‡½æ•°ï¼Œä¼ å…¥ä¸¤ä¸ªå›è°ƒå‡½æ•°</span></span><br><span class="line">thunk(getCount);</span><br><span class="line">thunk(getMoreCount);</span><br><span class="line"></span><br><span class="line"><span class="comment">//ä¸¤ç§’åä¸€èµ·è¾“å‡ºï¼š</span></span><br><span class="line"><span class="comment">//[count] 40</span></span><br><span class="line"><span class="comment">//[more,conut] 400</span></span><br></pre></td></tr></table></figure>
<p>ä¸Šé¢è°ƒç”¨äº†ä¸¤æ¬¡<code>thunk</code>å‡½æ•°ï¼Œä½†æ˜¯ç»“æœæ˜¯ä¸€èµ·è¾“å‡ºçš„ï¼Œä¹Ÿå°±æ˜¯è¯´ä¸¤ä¸ªå¼‚æ­¥æµç¨‹å®é™…ä¸Šæ˜¯ç‹¬ç«‹çš„ã€‚</p>
<h4><span id="generator-å‡½æ•°é€šè¿‡-thunk-å°è£…å¼‚æ­¥æ“ä½œ">Generator å‡½æ•°é€šè¿‡ Thunk å°è£…å¼‚æ­¥æ“ä½œ</span></h4>
<p>å·²ç»çŸ¥é“ï¼Œ<code>yield</code>å¯ä»¥æš‚åœ Generator å‡½æ•°æ‰§è¡Œï¼Œå®é™…ä¸Šæ˜¯<strong>äº¤å‡ºäº†ç¨‹åºçš„æ‰§è¡Œæƒï¼Œå¯ä»¥é€šè¿‡è°ƒç”¨<code>next</code>æ–¹æ³•ä½¿ Generator å‡½æ•°å†æ¬¡è·å–æ‰§è¡Œæƒ</strong>ï¼Œè€Œè°ƒç”¨<code>next</code>æ–¹æ³•å¯ä»¥æ”¾åˆ°å›è°ƒä¸­è¿›è¡Œã€‚ ä¸‹é¢åœ¨ç”¨ Generator å‡½æ•°å®ç°ä¸¤ä¸ªå¼‚æ­¥ä»»åŠ¡ï¼Œå¹¶ä¸”ç¬¬äºŒä¸ªå¼‚æ­¥ä»»åŠ¡ä½¿ç”¨ç¬¬ä¸€ä¸ªå¼‚æ­¥çš„ç»“æœæ¥æ‰§è¡Œï¼ˆç­‰å¾…ç¬¬ä¸€ä¸ªå¼‚æ­¥ç»“æŸè·å–åˆ°ç»“æœå†å°†å…¶ä½œä¸ºç¬¬äºŒä¸ªå¼‚æ­¥ä»»åŠ¡çš„å‚æ•°ï¼‰ã€‚</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">asyncTask</span>(<span class="params">number</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="function"><span class="keyword">function</span> (<span class="params">callBack</span>) </span>&#123;</span><br><span class="line">    setTimeout(<span class="function"><span class="params">()</span> =&gt;</span> callBack(number + <span class="number">1</span>), <span class="number">2000</span>);</span><br><span class="line">  &#125;;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">function</span>* <span class="title">gen</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">const</span> a1 = <span class="keyword">yield</span> asyncTask(<span class="number">3</span>);</span><br><span class="line">  <span class="built_in">console</span>.info(<span class="string">"a1"</span>, a1);</span><br><span class="line">  <span class="keyword">const</span> a2 = <span class="keyword">yield</span> asyncTask(a1);</span><br><span class="line">  <span class="built_in">console</span>.info(<span class="string">"a2"</span>, a2);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">const</span> g = gen();</span><br><span class="line"><span class="keyword">const</span> result1 = g.next();</span><br><span class="line">result1.value(<span class="function">(<span class="params">data1</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="comment">//1</span></span><br><span class="line">  g.next(data1).value(<span class="function">(<span class="params">data2</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="comment">//2</span></span><br><span class="line">    g.next(data2);</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">//ä¸¤ç§’åè¾“å‡º</span></span><br><span class="line"><span class="comment">// a1 4</span></span><br><span class="line"><span class="comment">//å†è¿‡ä¸¤ç§’åè¾“å‡º</span></span><br><span class="line"><span class="comment">// a2 5</span></span><br></pre></td></tr></table></figure>
<p>ä¼ å…¥çš„å€¼æ˜¯<code>3</code>ï¼Œä¸¤ç§’åå¾—åˆ°<code>4</code>ï¼Œç¬¬ä¸€ä¸ªå¼‚æ­¥æµç¨‹æ‰§è¡Œå®Œã€‚è€Œåç¬¬ä¸€ä¸ªå¼‚æ­¥çš„ç»“æœ<code>4</code>åˆè¢«å½“åšå‚æ•°ä¼ åˆ°ç¬¬äºŒä¸ªå¼‚æ­¥ä»»åŠ¡ä¸­ï¼Œæ‰€ä»¥å¾—åˆ°<code>5</code>ã€‚è¿™é‡Œå¼‚æ­¥å°±æŒ‰ç…§é¢„æœŸæ‰§è¡Œäº†ã€‚</p>
<p>ä¸Šé¢ç¬¬ä¸€æ¬¡è°ƒç”¨<code>g.next()</code>çš„æ—¶å€™ï¼Œç¨‹åºæ‰§è¡Œæƒäº¤ç»™ Generator å‡½æ•°ï¼Œå¹¶æ‰§è¡Œåˆ°äº†<code>yield asyncTask(3)</code>ï¼Œæ­¤æ—¶äº¤å‡ºæ‰§è¡Œæƒã€‚å’Œä¸Šé¢çš„ä¾‹å­ä¸€æ ·ï¼Œ<code>asyncTask(3)</code>çš„æ‰§è¡Œç»“æœæ˜¯ä¸€ä¸ª Thunk å‡½æ•°ï¼Œå¹¶éœ€è¦æ¥å—ä¸€ä¸ªå›è°ƒå‡½æ•°ä½œä¸ºå‚æ•°ã€‚ è€Œ<code>yield</code>å‘½ä»¤ä½¿è¯¥å‡½æ•°ä¹Ÿæ˜¯æŒ‚åœ¨è¿”å›çš„<code>{value:..,done:...}</code>å¯¹è±¡çš„ value å±æ€§ä¸Šçš„ï¼Œæ‰€ä»¥å¯ä»¥é€šè¿‡<code>result1</code>çš„ value è·å–åˆ°è¯¥ Thunk å‡½æ•°ã€‚</p>
<p><code>result1.value</code>æ˜¯ä¸€ä¸ª Thunk å‡½æ•°ï¼Œå°±éœ€è¦ä¼ å…¥ä¸€ä¸ªå›è°ƒå‡½æ•°ï¼Œä¸Šé¢ä¼ å…¥çš„æ˜¯<code>(data1) =&gt; {g.next(data1)...</code>ï¼Œå›è°ƒå‡½æ•°ä¸­æ‰§è¡Œäº†<code>g.next</code>æ–¹æ³•, Generator å‡½æ•°å†æ¬¡è·å–äº†æ‰§è¡Œæƒã€‚<code>data1</code>ä½œä¸ºå‚æ•°ä¼ å…¥äº†<code>next</code>æ–¹æ³•ï¼Œæ•…<code>a1</code>çš„å€¼å°±æ˜¯<code>data1</code>(yield è¡¨è¾¾å¼çš„è¿”å›å€¼)ã€‚åŒæ ·ï¼Œ<code>g.next(data1).value</code>ä¹Ÿæ˜¯ä¸€ä¸ª Thunk å‡½æ•°ï¼Œç»§ç»­ä¸ºå…¶æ·»åŠ å›è°ƒå°±å¯ä»¥è¿›è¡Œåé¢çš„æ“ä½œï¼Œè¿™é‡Œå°±å·²ç»é€šè¿‡ Generator å‡½æ•°å°†ä¸¤ä¸ªå¼‚æ­¥è¿‡ç¨‹<code>&quot;ä¸²è”&quot;</code>äº†èµ·æ¥ã€‚</p>
<blockquote>
<p>å…³é”®ç‚¹ï¼šé€šè¿‡å°†å¼‚æ­¥æ“ä½œå°è£…åˆ° Thunk ä¸­ï¼Œåœ¨ Generator ä¸­é€šè¿‡<code>yield</code>å…³é”®å­—ï¼Œå›è°ƒå‡½æ•°ä¸­æ‰§è¡Œ<code>next</code>æ–¹æ³•æ§åˆ¶æ‰§è¡Œã€‚</p>
</blockquote>
<h4><span id="generator-å‡½æ•°çš„è‡ªåŠ¨æ‰§è¡Œ">Generator å‡½æ•°çš„è‡ªåŠ¨æ‰§è¡Œ</span></h4>
<p>ä¸Šé¢å·²ç»é€šè¿‡å›è°ƒå‡½æ•°è°ƒç”¨<code>next</code>ï¼Œä½¿ Generator ä¸­çš„ Thunk å‡½æ•°ä¾æ¬¡æ‰§è¡Œã€‚ä½†æ˜¯éœ€è¦æ¯ä¸ª Thunk å‡½æ•°éƒ½æŒ‡å®šå›è°ƒå‡½æ•°ï¼Œè€Œä¸”è¿™è¿˜åªæ˜¯æ²¡æœ‰å¤„ç†é”™è¯¯å¼‚å¸¸çš„æƒ…å†µä¸‹ã€‚é‚£ä¹ˆæœ‰æ²¡æœ‰ä¸€ç§æ–¹æ³•ï¼Œè®©å¤šä¸ªå¤„ç†ç­–ç•¥ç›¸ä¼¼çš„ Thunk å‡½æ•°è‡ªåŠ¨æ‰§è¡Œå‘¢ï¼Ÿ</p>
<p>è‚¯å®šæ˜¯æœ‰çš„ï¼Œè‡ªå®šä¹‰å¯å¤ç”¨çš„å›è°ƒå‡½æ•°ï¼š</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">asyncThunk</span>(<span class="params">number</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="function"><span class="keyword">function</span> (<span class="params">callBack</span>) </span>&#123;</span><br><span class="line">    setTimeout(<span class="function"><span class="params">()</span> =&gt;</span> callBack(number + <span class="number">1</span>), <span class="number">2000</span>);</span><br><span class="line">  &#125;;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">function</span>* <span class="title">gen</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">const</span> r1 = <span class="keyword">yield</span> asyncThunk(<span class="number">3</span>);</span><br><span class="line">  <span class="built_in">console</span>.info(<span class="string">"r1"</span>, r1);</span><br><span class="line">  <span class="keyword">const</span> r2 = <span class="keyword">yield</span> asyncThunk(r1);</span><br><span class="line">  <span class="built_in">console</span>.info(<span class="string">"r2"</span>, r2);</span><br><span class="line">  <span class="keyword">const</span> r3 = <span class="keyword">yield</span> asyncThunk(r2);</span><br><span class="line">  <span class="built_in">console</span>.info(<span class="string">"r3"</span>, r3);</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">run</span>(<span class="params">fn</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">const</span> g = fn();</span><br><span class="line">  <span class="function"><span class="keyword">function</span> <span class="title">callBack</span>(<span class="params">data</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">const</span> result = g.next(data);</span><br><span class="line">    <span class="keyword">if</span> (result.done) <span class="keyword">return</span>;</span><br><span class="line">    result.value(callBack);</span><br><span class="line">  &#125;</span><br><span class="line">  callBack();</span><br><span class="line">&#125;</span><br><span class="line">run(gen);</span><br><span class="line"></span><br><span class="line"><span class="comment">// æ¯éš”ä¸¤ç§’ä¾æ¬¡è¾“å‡º</span></span><br><span class="line"><span class="comment">// r1 4</span></span><br><span class="line"><span class="comment">// r2 5</span></span><br><span class="line"><span class="comment">// r3 6</span></span><br></pre></td></tr></table></figure>
<blockquote>
<p>ç¬¬ä¸€æ¬¡ callBack æ²¡æœ‰ä¼ å…¥å‚æ•°ï¼Œè°ƒç”¨<code>next</code>æ–¹æ³•è¿›å…¥ Generatorï¼Œä¼ å…¥ dataï¼Œæ­¤æ—¶ data è™½ç„¶æ˜¯ undefinedï¼Œä½†<code>next</code>å‚æ•°æ˜¯<strong>ä¸Šä¸€ä¸ª</strong><code>yield</code>è¡¨è¾¾å¼çš„ç»“æœï¼Œæ‰§è¡Œåˆ°çš„<code>yield</code>è¡¨è¾¾å¼æœ¬èº«å°±æ˜¯ç¬¬ä¸€æ¡ï¼Œæ‰€ä»¥å¹¶æ— å½±å“ï¼Œ<code>result.value</code>è¿™ä¸ª Thunk å‡½æ•°æ¥æ”¶ callBack ä½œä¸ºå‚æ•°ï¼ŒcallBack å†æ¬¡æ‰§è¡Œæ—¶ data çš„å‚æ•°å°±æ˜¯ä¸Šæ¬¡å¼‚æ­¥çš„ç»“æœ<code>4</code>ã€‚åé¢çš„ Thunk éƒ½æ˜¯ä¼ å…¥ callBack å‡½æ•°ï¼Œå½¢å¦‚é€’å½’ã€‚</p>
</blockquote>
<p>å®šä¹‰ callBack å‡½æ•°ï¼Œåœ¨ callBack å‡½æ•°ä¸­è°ƒç”¨<code>next</code>,å¹¶ä¸”å°†ä¸Šä¸€æ¬¡å›è°ƒå‡½æ•°çš„å‚æ•°ï¼ˆä¸Šä¸€ä¸ªå¼‚æ­¥æ“ä½œçš„ç»“æœï¼‰ä¼ å…¥ä¸‹ä¸€æ¬¡çš„<code>next</code>æ–¹æ³•ä½œä¸ºå‚æ•°ï¼ŒæŒ‡å®šå›è°ƒå‡½æ•°ä¹Ÿæ˜¯è‡ªèº« callBackï¼Œè¾¾åˆ°äº†ä¸Šä¸€æ¬¡å¼‚æ­¥çš„ç»“æœç”¨äºä¸‹ä¸€æ¬¡å¼‚æ­¥ä»»åŠ¡çš„ç›®çš„ï¼Œä¸”æ²¡æœ‰æŒ‡å®šå¤šä¸ªå›è°ƒå‡½æ•°ï¼Œä½¿ Generator å‡½æ•°è‡ªåŠ¨æ‰§è¡Œåˆ°ç»“æŸã€‚</p>

                

                <hr>
                <!-- Pager -->
                <ul class="pager">
                    
                        <li class="previous">
                            <a href="/2020/07/22/ES6-async-await/" data-toggle="tooltip" data-placement="top" title="ES6 async/await">&larr; Previous Post</a>
                        </li>
                    
                    
                        <li class="next">
                            <a href="/2020/07/08/ES6-Iterator-å’Œè¿­ä»£åè®®/" data-toggle="tooltip" data-placement="top" title="ES6 Iterator å’Œè¿­ä»£åè®®">Next Post &rarr;</a>
                        </li>
                    
                </ul>

                <!-- duoshuo Share start -->
                
                <!-- å¤šè¯´ Share end-->

                <!-- å¤šè¯´è¯„è®ºæ¡† start -->
                
                <!-- å¤šè¯´è¯„è®ºæ¡† end -->

                <!-- disqus comment start -->
                
                    <div class="comment">
                        <div id="disqus_thread" class="disqus-thread"></div>
                    </div>
                
                <!-- disqus comment end -->
            </div>
            
            <!-- Tabe of Content -->
            <!-- Table of Contents -->
 
<aside id="sidebar">
  <div id="toc" class="toc-article">
    <strong class="toc-title">Contents</strong>
     <ol class="toc-nav"><li class="toc-nav-item toc-nav-level-3"><a class="toc-nav-link" href="#null"><span class="toc-nav-number">1.</span> <span class="toc-nav-text">åˆè¯† Generator å‡½æ•°</span></a></li><li class="toc-nav-item toc-nav-level-3"><a class="toc-nav-link" href="#null"><span class="toc-nav-number">2.</span> <span class="toc-nav-text">yield è¡¨è¾¾å¼</span></a><ol class="toc-nav-child"><li class="toc-nav-item toc-nav-level-4"><a class="toc-nav-link" href="#null"><span class="toc-nav-number">2.1.</span> <span class="toc-nav-text">yield è¡¨è¾¾å¼çš„è¿”å›å€¼</span></a></li><li class="toc-nav-item toc-nav-level-4"><a class="toc-nav-link" href="#null"><span class="toc-nav-number">2.2.</span> <span class="toc-nav-text">yield* è¡¨è¾¾å¼</span></a></li></ol></li><li class="toc-nav-item toc-nav-level-3"><a class="toc-nav-link" href="#null"><span class="toc-nav-number">3.</span> <span class="toc-nav-text">Generator.prototype çš„ next,throw,return æ–¹æ³•</span></a></li><li class="toc-nav-item toc-nav-level-3"><a class="toc-nav-link" href="#null"><span class="toc-nav-number">4.</span> <span class="toc-nav-text">Generator å‡½æ•°å®ç°å¼‚æ­¥</span></a><ol class="toc-nav-child"><li class="toc-nav-item toc-nav-level-4"><a class="toc-nav-link" href="#null"><span class="toc-nav-number">4.1.</span> <span class="toc-nav-text">Thunk å‡½æ•°</span></a></li><li class="toc-nav-item toc-nav-level-4"><a class="toc-nav-link" href="#null"><span class="toc-nav-number">4.2.</span> <span class="toc-nav-text">Generator å‡½æ•°é€šè¿‡ Thunk å°è£…å¼‚æ­¥æ“ä½œ</span></a></li><li class="toc-nav-item toc-nav-level-4"><a class="toc-nav-link" href="#null"><span class="toc-nav-number">4.3.</span> <span class="toc-nav-text">Generator å‡½æ•°çš„è‡ªåŠ¨æ‰§è¡Œ</span></a></li></ol></li></ol> 
  </div>
</aside>
 

                
            <!-- Sidebar Container -->
            <div class="
                col-lg-8 col-lg-offset-2
                col-md-10 col-md-offset-1
                sidebar-container">

                <!-- Featured Tags -->
                
                <section>
                    <!-- no hr -->
                    <h5><a href="/tags/">FEATURED TAGS</a></h5>
                    <div class="tags">
                       
                          <a class="tag" href="/tags/#ES6 å¤§ä½œæˆ˜" title="ES6 å¤§ä½œæˆ˜">ES6 å¤§ä½œæˆ˜</a>
                        
                    </div>
                </section>
                

                <!-- Friends Blog -->
                
                <hr>
                <h5>FRIENDS</h5>
                <ul class="list-inline">

                    
                        <li><a href="http://beantech.org" target="_blank">Bean Tech</a></li>
                    
                        <li><a href="http://blog.kaijun.rocks" target="_blank">Kaijun&#39;s Blog</a></li>
                    
                        <li><a href="http://huangxuan.me" target="_blank">Hux Blog</a></li>
                    
                        <li><a href="#" target="_blank">It Helps SEO</a></li>
                    
                </ul>
                
            </div>
        </div>
    </div>
</article>




<!-- disqus embedded js code start (one page only need to embed once) -->
<script type="text/javascript">
    /* * * CONFIGURATION VARIABLES * * */
    var disqus_shortname = "your-disqus-ID";
    var disqus_identifier = "http://yoursite-url/2020/07/15/ES6-Generator-å‡½æ•°/";
    var disqus_url = "http://yoursite-url/2020/07/15/ES6-Generator-å‡½æ•°/";

    (function() {
        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();
</script>
<!-- disqus embedded js code start end -->




<!-- async load function -->
<script>
    function async(u, c) {
      var d = document, t = 'script',
          o = d.createElement(t),
          s = d.getElementsByTagName(t)[0];
      o.src = u;
      if (c) { o.addEventListener('load', function (e) { c(null, e); }, false); }
      s.parentNode.insertBefore(o, s);
    }
</script>
<!-- anchor-js, Doc:http://bryanbraun.github.io/anchorjs/ -->
<script>
    async("https://cdn.bootcss.com/anchor-js/1.1.1/anchor.min.js",function(){
        anchors.options = {
          visible: 'hover',
          placement: 'left',
          icon: 'â„¬'
        };
        anchors.add().remove('.intro-header h1').remove('.subheading').remove('.sidebar-container h5');
    })
</script>
<style>
    /* place left on bigger screen */
    @media all and (min-width: 800px) {
        .anchorjs-link{
            position: absolute;
            left: -0.75em;
            font-size: 1.1em;
            margin-top : -0.1em;
        }
    }
</style>



    <!-- Footer -->
    <!-- Footer -->
<footer>
  <div class="container">
    <div class="row">
      <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
        <ul class="list-inline text-center">
               
          <!-- æš‚æ—¶ä¸åœ¨åº•éƒ¨æ˜¾ç¤ºGitHub -->
          <!-- <li>
            <a
              target="_blank"
              href="https://github.com/lexguy"
            >
              <span class="fa-stack fa-lg">
                <i class="fa fa-circle fa-stack-2x"></i>
                <i class="fa fa-github fa-stack-1x fa-inverse"></i>
              </span>
            </a>
          </li> -->
           
        </ul>
        <p class="copyright text-muted">
          <span style="text-decoration: underline;">
            Copyright &copy; xuwei 2020
          </span>
          <!-- <span style="margin-left: 30px; font-style: italic;">
            starkcoder@sina.com</span
          > -->
          <br />

          <!-- Theme by <a href="http://huangxuan.me">Hux</a> -->
          <!-- <span style="display: inline-block; margin: 0 5px;">
            <i class="fa fa-heart"></i>
          </span> -->
          <!-- re-Ported by <a href="http://beantech.org">BeanTech</a> | -->
          <!-- <iframe
            style="margin-left: 2px; margin-bottom: -5px;"
            frameborder="0"
            scrolling="0"
            width="91px"
            height="20px"
            src="https://ghbtns.com/github-btn.html?user=YenYuHsuan&repo=hexo-theme-beantech&type=star&count=true"
          >
          </iframe> -->
        </p>
      </div>
    </div>
  </div>
</footer>

<!-- jQuery -->
<script src="/js/jquery.min.js"></script>

<!-- Bootstrap Core JavaScript -->
<script src="/js/bootstrap.min.js"></script>

<!-- Custom Theme JavaScript -->
<script src="/js/hux-blog.min.js"></script>

<!-- async load function -->
<script>
  function async(u, c) {
    var d = document,
      t = "script",
      o = d.createElement(t),
      s = d.getElementsByTagName(t)[0];
    o.src = u;
    if (c) {
      o.addEventListener(
        "load",
        function (e) {
          c(null, e);
        },
        false
      );
    }
    s.parentNode.insertBefore(o, s);
  }
</script>

<!-- 
     Because of the native support for backtick-style fenced code blocks 
     right within the Markdown is landed in Github Pages, 
     From V1.6, There is no need for Highlight.js, 
     so Huxblog drops it officially.

     - https://github.com/blog/2100-github-pages-now-faster-and-simpler-with-jekyll-3-0  
     - https://help.github.com/articles/creating-and-highlighting-code-blocks/    
-->
<!--
    <script>
        async("http://cdn.bootcss.com/highlight.js/8.6/highlight.min.js", function(){
            hljs.initHighlightingOnLoad();
        })
    </script>
    <link href="http://cdn.bootcss.com/highlight.js/8.6/styles/github.min.css" rel="stylesheet">
-->

<!-- jquery.tagcloud.js -->
<script>
  // only load tagcloud.js in tag.html
  if ($("#tag_cloud").length !== 0) {
    async(
      "http://yoursite-url/js/jquery.tagcloud.js",
      function () {
        $.fn.tagcloud.defaults = {
          //size: {start: 1, end: 1, unit: 'em'},
          color: { start: "#bbbbee", end: "#0085a1" },
        };
        $("#tag_cloud a").tagcloud();
      }
    );
  }
</script>

<!--fastClick.js -->
<script>
  async(
    "https://cdn.bootcss.com/fastclick/1.0.6/fastclick.min.js",
    function () {
      var $nav = document.querySelector("nav");
      if ($nav) FastClick.attach($nav);
    }
  );
</script>

<!-- Google Analytics -->


<script>
  // dynamic User by Hux
  var _gaId = "UA-XXXXXXXX-X";
  var _gaDomain = "yoursite";

  // Originial
  (function (i, s, o, g, r, a, m) {
    i["GoogleAnalyticsObject"] = r;
    (i[r] =
      i[r] ||
      function () {
        (i[r].q = i[r].q || []).push(arguments);
      }),
      (i[r].l = 1 * new Date());
    (a = s.createElement(o)), (m = s.getElementsByTagName(o)[0]);
    a.async = 1;
    a.src = g;
    m.parentNode.insertBefore(a, m);
  })(
    window,
    document,
    "script",
    "//www.google-analytics.com/analytics.js",
    "ga"
  );

  ga("create", _gaId, _gaDomain);
  ga("send", "pageview");
</script>



<!-- Baidu Tongji -->




	<a id="rocket" href="#top" class=""></a>
	<script type="text/javascript" src="/js/totop.js?v=1.0.0" async=""></script>
    <script type="text/javascript" src="/js/toc.js?v=1.0.0" async=""></script>
<!-- Image to hack wechat -->
<img src="http://yoursite-url/img/icon_wechat.png" width="0" height="0" />
<!-- Migrate from head to bottom, no longer block render and still work -->

</body>

</html>
